<!DOCTYPE html>
<html>
<head>
  <title>Register</title>
  <link rel="stylesheet" href="/style.css">
  <style>
    body {
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      background-color: #e5ddd5;
    }
    .auth-box {
      background: white;
      padding: 30px;
      border-radius: 8px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      width: 320px;
    }
    .auth-box h2 {
      color: #075e54;
      text-align: center;
    }
    .auth-box form {
      display: flex;
      flex-direction: column;
    }
    .auth-box input {
      padding: 10px;
      margin-bottom: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
      font-size: 14px;
    }
    .auth-box button {
      background: #075e54;
      color: white;
      padding: 10px;
      border: none;
      border-radius: 5px;
      font-size: 14px;
      cursor: pointer;
    }
    .auth-box button:hover {
      background: #064e45;
    }
  </style>
</head>
<body>
  <div class="auth-box">
    <h2>Register</h2>
    <% if (typeof error !== 'undefined' && error) { %>
      <div style="color:#c62828; background:#ffeaea; border-radius:5px; padding:8px 12px; margin-bottom:10px; font-size:14px; text-align:center;">
        <%= error %>
      </div>
    <% } %>
    <form action="/register" method="POST">
      <input name="username" placeholder="Username" required value="<%= typeof username !== 'undefined' ? username : '' %>" />
      <input name="email" type="email" placeholder="Email" required value="<%= typeof email !== 'undefined' ? email : '' %>" />
      <div style="position:relative;max-width:100%;display:flex;align-items:center;">
        <input name="password" type="password" placeholder="Password" required id="passwordInput" style="flex:1;padding-right:38px;box-sizing:border-box;min-width:0;" />
        <span id="togglePassword" style="position:absolute;right:10px;top:50%;transform:translateY(-50%);cursor:pointer;display:flex;align-items:center;">
          <svg id="eyeIcon" xmlns="http://www.w3.org/2000/svg" width="22" height="22" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/></svg>
        </span>
      </div>
      <div class="form-group">
        <small>You will receive an OTP email after registering.</small>
      </div>
      <button>Register</button>
    </form>
    <p style="text-align:center;margin-top:10px;">Already have an account? <a href="/login">Login</a></p>
  </div>
  <script>
    const passwordInput = document.getElementById('passwordInput');
    const togglePassword = document.getElementById('togglePassword');
    const eyeIcon = document.getElementById('eyeIcon');
    let passwordVisible = false;
    togglePassword.addEventListener('click', function() {
      passwordVisible = !passwordVisible;
      passwordInput.type = passwordVisible ? 'text' : 'password';
      eyeIcon.innerHTML = passwordVisible
        ? '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.542-7a9.956 9.956 0 012.042-3.292m3.087-2.727A9.956 9.956 0 0112 5c4.478 0 8.268 2.943 9.542 7a9.965 9.965 0 01-4.293 5.411M15 12a3 3 0 11-6 0 3 3 0 016 0z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 3l18 18" />'
        : '<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"/><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"/>';
    });
  </script>
</body>
</html>
